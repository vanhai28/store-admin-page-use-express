<link rel="stylesheet" href="/css/custom.css">
<main>
    <div class="container-fluid">
        <h1 class="mt-4">Danh sách sản phẩm</h1>
        <ol class="breadcrumb mb-4">
            <li class="breadcrumb-item"><a href="index.html">Dashboard</a></li>
            <li class="breadcrumb-item active">Sách</li>
        </ol>
     
        <div class="row text-right mb-4"> 
            <div class="col-sm-3 input-group d-inline-flex">            
                <div class="dropdown">
                    {{#if curentCategoryView}}
                        <button class="btn btn-light dropdown-toggle col-sm-12" type="button" id="dropdownCategory" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            {{curentCategoryView.nameOfCategory}}
                        </button>
                    {{else}}
                        <button class="btn btn-light dropdown-toggle col-sm-12" type="button" id="dropdownCategory" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            All
                        </button>
                    {{/if}}
                   
                    <div class="dropdown-menu" aria-labelledby="dropdownCategory">
                        <a  href="/admin/book/list-book?page=1&&category=" class="dropdown-item" >All </a>
                        {{#each category}}
                            <a name="{{nameOfCategory}}" href="/admin/book/list-book?page=1&&category={{_id}}"  class="dropdown-item"  >{{nameOfCategory}} - {{numberOfProduct}} </a>
                        {{/each}}                        
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
               <div class="input-group mb-3">
                   <input type="text" class="form-control" placeholder="Tìm trên toàn bộ danh sách" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                    <div class="input-group-prepend">
                        <button class="input-group-text" id="inputGroup-sizing-default">Tìm kiếm</button>
                    </div>
                    
                </div>
            </div>
            <div class="col-sm-3">
                    <a href="/admin/book/add-book" class=" btn btn-success ">Thêm sản phẩm</a>
            </div> 
        </div>
        <div class="alert alert-danger d-none messageDelete"></div>
        <div class="card mb-4">
            <div class="card-header">
                <i class="fas fa-table mr-1"></i>
                Danh sách sản phẩm
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                        <thead>
                            <tr>
                                <th>Tiêu đề</th>
                                <th>Tác giả</th>
                                <th>Loại sách</th>
                                <th>Giá bán</th>
                                <th>Lượt mua</th>
                                <th>Lượt xem</th>
                                <th>Chỉnh sửa</th>    
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>Tiêu đề</th>
                                <th>Tác giả</th>
                                <th>Loại sách</th>
                                <th>Giá bán</th>
                                <th>Lượt mua</th>
                                <th>Lượt xem</th>
                                <th>Chỉnh sửa</th>    
                            </tr>
                        </tfoot>
                        <tbody>
                            {{#each book}}
                                <tr>
                                    <td>{{title}}</td>
                                   <td>
                                       {{join author }}
                                           
                                    </td>
                                    <td>{{category}}</td>
                                    <td>{{toFloat price}}</td>
                                    <td>{{views}}</td>
                                    <td>{{orders}}</td>
                                    <td>
                                        <button type="button" onclick="deleteBook(name)" name={{_id}} class="btn btn-sm btn-icon btn-flat btn-default" data-toggle="tooltip" data-original-title="xoá">
                                            <i class="fas fa-trash-alt text-danger"aria-hidden="true"></i>
                                        </button>
                                        <button type="button" class="btn btn-sm btn-icon btn-flat btn-default" data-toggle="tooltip" data-original-title="sửa">
                                            <a href="/admin/book/edit?id={{_id}}"><i class="fas fa-edit text-success" aria-hidden="true"></i></a>
                                        </button>
                                    </td>
                                </tr>
                            {{/each}}
                            
                        </tbody>
                    </table>
                </div>
                 <nav aria-label="Page navigation example" style="margin-top: 20px;">

                        <ul class="pagination justify-content-center">
                            
                            {{#isnt currentPage 1}}
                            <li class="page-item">
                                <a class="page-link" href="/admin/book/list-book?page={{prevPage}}&&category={{curentCategoryView._id}}" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                    <span class="sr-only">Previous</span>
                                </a>
                            </li>
                            {{/isnt}}

                            {{#if hasPreviousPage}}
                            <li class="page-item">
                                <a class="page-link"
                                    href="/admin/book/list-book?page={{prevPage}}&&category={{curentCategoryView._id}}">{{prevPage}}
                                </a>
                            </li>
                            {{/if}}

                            <li class="page-item active">
                                <a class="page-link" href="javascript:void(0)" tabindex="-1">{{currentPage}}</a>
                            </li>

                            {{#if hasNextPage}}
                            <li class="page-item"><a class="page-link"
                                    href="/admin/book/list-book?page={{nextPage}}&&category={{curentCategoryView._id}}">{{nextPage}}</a></li>
                            {{/if}}

                            {{#gt lastPage currentPage }}
                            <li class="page-item">
                                <a class="page-link" href="/admin/book/list-book?page={{nextPage}}&&category={{curentCategoryView._id}}" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </li>
                            {{/gt}}

                        </ul>
                </nav>
            </div>
        </div>
    </div>
</main>
<div class="box-delete-item d-none">
    <div class="container-content row d-flex">
        <div class="box-content col-sm-10 col-md-8 col-lg-6">
            <p>
                 Bạn đang xoá một sản phẩm,sau khi xoá, sản phẩm sẽ không được thể hiện trên trang web 
                Dữ liệu về sản phẩm vẫn còn trong cơ sở dữ liệu.
                Bạn có chắc muốn xoá?   
            </p>
            <button class="btn btn-light btn__back">Quay lại</button>
            <button class="btn btn-danger btn__confirm-delete">Xoá</button>
        </div>
    </div>
</div>
<script src="/js/customize.js"></script>

<script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>